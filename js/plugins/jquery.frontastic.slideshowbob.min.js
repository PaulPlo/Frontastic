/* Slideshow Bob v0.8
/ Frontastic responsive, touch carousel
/ by @pcravayat */
(function(a){a.slideshowbob=function(b,f){var i={interval:5000,speed:700,effect:"slide",pills:false,autostart:false};var h=a(this);h.settings={};var m=a(b),b=b;var l;var c;var g;var p;var r;var y;var v;h.init=function(){h.settings=a.extend({},i,f);m.css("overflow","hidden");l=0;c=0;v=false;p=m.find(".slide");r=p.length;p.wrapAll('<div class="slideshow-inner"></div>').css({"float":"left"});if(h.settings.pills){e();}if(n()){s();}x();var z={triggerOnTouchEnd:true,swipeStatus:t,allowPageScroll:"vertical",threshold:75};m.find(".slide").swipe(z);a(window).bind("resize.slideshowbob",function(){o();w(0);});if(h.settings.autostart){h.start();}};h.start=function(){y=setInterval(function(){m.find(".controls").find(".next").click();},h.settings.interval);};var x=function(){o();l=0;k();};var k=function(){if(Modernizr.csstransitions){m.children(".slideshow-inner").css("-webkit-transform","translate3d(0px,0px,0px)");m.children(".slideshow-inner").css("-moz-transform","translate3d(0px,0px,0px)");m.children(".slideshow-inner").css("transform","translate3d(0px,0px,0px)");}else{a(".slideshow-inner").css("margin-left",0);}};var o=function(){g=a(".slideshow").outerWidth(true);slidesMargin=a(p).outerWidth()-a(p).outerWidth(true);if(slidesMargin<0){a(p).css("width",g);m.find(".slideshow-inner").css("width",g*r);}else{a(p).css("width",g+slidesMargin);m.find(".slideshow-inner").css("width",(g+slidesMargin)*r);}};var n=function(){if(m.find(".controls").length!=0&&m.find(".controls").find(".next").length!=0&&m.find(".controls").find(".prev").length!=0){return true;}return false;};var s=function(){m.find(".controls").find("span").bind("click.slideshowbob",function(){if(l==p.length-1&&a(this).hasClass("next")){m.find(".slide:last").after(m.find(".slide:first"));var z=-Math.abs(g*(l-1)).toString();v=true;if(c<p.length-1){c++;}else{c=0;}}else{if(l==0&&a(this).hasClass("prev")){m.find(".slide:first").before(m.find(".slide:last"));var z=-Math.abs(g*(l+1)).toString();v=true;if(c>0){c--;}else{c=p.length-1;}}}if(v){if(Modernizr.csstransitions){m.children(".slideshow-inner").css("-webkit-transition-duration","0s");m.children(".slideshow-inner").css("-moz-transition-duration","0s");m.children(".slideshow-inner").css("transition-duration","0s");m.children(".slideshow-inner").css("-webkit-transform","translate3d("+z+"px,0px,0px)");m.children(".slideshow-inner").css("-moz-transform","translate3d("+z+"px,0px,0px)");m.children(".slideshow-inner").css("transform","translate3d("+z+"px,0px,0px)");}else{m.children(".slideshow-inner").css("margin-left",z);}setTimeout(function(){if(h.settings.effect=="fade"){d();}else{w();}},10);v=false;}else{if(a(this).attr("class")=="next"){u("next");if(c<p.length-1){c++;}else{c=0;}}else{u("prev");if(c>0){c--;}else{c=p.length-1;}}if(h.settings.effect=="fade"){d();}else{w();}}q();});};var e=function(){m.find(".slideshow-inner").after('<ul class="pills"></ul>');var z=0;a.each(p,function(){m.find(".pills").append("<li id=pill_"+z+' class="pill"></li>');z++;});m.find(".pill").first().addClass("active");m.find(".pills > li").bind("click.slideshowbob",function(){var A=a(this).attr("id");m.children(".slideshow-inner").html(p);k();var B=A[A.length-1];l=parseInt(B);c=parseInt(B);if(h.settings.effect=="fade"){d();}else{w();}q();});};var q=function(){m.find(".pills > li").removeClass("active");m.find("#pill_"+c).addClass("active");};var t=function(A,z,C,D){if(z=="move"&&(C=="left"||C=="right")){var B=0;if(C=="left"){j((g*l)+D,B);}else{if(C=="right"){j((g*l)-D,B);}}}else{if(z=="cancel"){j(g*l,h.settings.speed);}else{if(z=="end"){if(C=="left"){u("next");if(c<p.length-1){c++;}else{c=0;}}else{if(C=="right"){u("prev");if(c>0){c--;}else{c=p.length-1;}}}w();q();}}}};var u=function(z){if(z=="next"){l=(l<r-1)?l+1:l;}else{if(z=="prev"){l=(l!=0)?l-1:0;}}};var w=function(A){if(A==null){A=h.settings.speed;}var B=g*l;var z=(B<0?"":"-")+Math.abs(B).toString();m.children(".slideshow-inner").transition({x:z});};var d=function(){m.children(".slideshow-inner").fadeOut(300,function(){w(0);});m.children(".slideshow-inner").fadeIn(300);};var j=function(B,A){m.find(".slideshow-inner").css("-webkit-transition-duration",(A/1000).toFixed(1)+"s");var z=(B<0?"":"-")+Math.abs(B).toString();m.find(".slideshow-inner").css("-webkit-transform","translate3d("+z+"px,0px,0px)");};h.init();};a.fn.slideshowbob=function(b){return this.each(function(){if(a(this).data("slideshowbob")==undefined){var c=new a.slideshowbob(this,b);a(this).data("slideshowbob",c);}});};})(jQuery);(function(M){var E="left",F="right",N="up",y="down",O="in",x="out",H="none",B="auto",v="horizontal",A="vertical",K="all",L="start",I="move",J="end",D="cancel",P="ontouchstart" in window,w="TouchSwipe";var G={fingers:1,threshold:75,maxTimeThreshold:null,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,triggerOnTouchEnd:true,allowPageScroll:"auto",fallbackToMouseEvents:true,excludedElements:"button, input, select, textarea, a, .noSwipe"};M.fn.swipe=function(a){var b=M(this),c=b.data(w);if(c&&typeof a==="string"){if(c[a]){return c[a].apply(this,Array.prototype.slice.call(arguments,1));}else{M.error("Method "+a+" does not exist on jQuery.swipe");}}else{if(!c&&(typeof a==="object"||!a)){return z.apply(this,arguments);}}return b;};M.fn.swipe.defaults=G;M.fn.swipe.phases={PHASE_START:L,PHASE_MOVE:I,PHASE_END:J,PHASE_CANCEL:D};M.fn.swipe.directions={LEFT:E,RIGHT:F,UP:N,DOWN:y,IN:O,OUT:x};M.fn.swipe.pageScroll={NONE:H,HORIZONTAL:v,VERTICAL:A,AUTO:B};M.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,ALL:K};function z(a){if(a&&(a.allowPageScroll===undefined&&(a.swipe!==undefined||a.swipeStatus!==undefined))){a.allowPageScroll=H;}if(!a){a={};}a=M.extend({},M.fn.swipe.defaults,a);return this.each(function(){var b=M(this);var c=b.data(w);if(!c){c=new C(this,a);b.data(w,c);}});}function C(s,i){var t=(P||!i.fallbackToMouseEvents),ar=t?"touchstart":"mousedown",q=t?"touchmove":"mousemove",aw=t?"touchend":"mouseup",u="touchcancel";var k=0;var aq=null;var h=0;var ap=0;var aE=0;var f=1;var r=0;var az=M(s);var ao="start";var ak=0;var g=null;var ax=0;var n=0;try{az.bind(ar,aA);az.bind(u,at);}catch(an){M.error("events not supported "+ar+","+u+" on jQuery.swipe");}this.enable=function(){az.bind(ar,aA);az.bind(u,at);return az;};this.disable=function(){aj();return az;};this.destroy=function(){aj();az.data(w,null);return az;};function aA(Q){if(o()){return;}if(M(Q.target).closest(i.excludedElements,az).length>0){return;}Q=Q.originalEvent;var R,S=P?Q.touches[0]:Q;ao=L;if(P){ak=Q.touches.length;}else{Q.preventDefault();}k=0;aq=null;r=null;h=0;ap=0;aE=0;f=1;g=p();if(!P||(ak===i.fingers||i.fingers===K)||d()){g[0].start.x=g[0].end.x=S.pageX;g[0].start.y=g[0].end.y=S.pageY;ax=aD();if(ak==2){g[1].start.x=g[1].end.x=Q.touches[1].pageX;g[1].start.y=g[1].end.y=Q.touches[1].pageY;ap=aE=m(g[0].start,g[1].start);}if(i.swipeStatus||i.pinchStatus){R=al(Q,ao);}}else{at(Q);R=false;}if(R===false){ao=D;al(Q,ao);return R;}else{e(true);az.bind(q,am);az.bind(aw,l);}}function am(Q){Q=Q.originalEvent;if(ao===J||ao===D){return;}var S,T=P?Q.touches[0]:Q;g[0].end.x=P?Q.touches[0].pageX:T.pageX;g[0].end.y=P?Q.touches[0].pageY:T.pageY;n=aD();aq=a(g[0].start,g[0].end);if(P){ak=Q.touches.length;}ao=I;if(ak==2){if(ap==0){g[1].start.x=Q.touches[1].pageX;g[1].start.y=Q.touches[1].pageY;ap=aE=m(g[0].start,g[1].start);}else{g[1].end.x=Q.touches[1].pageX;g[1].end.y=Q.touches[1].pageY;aE=m(g[0].end,g[1].end);r=c(g[0].end,g[1].end);}f=aF(ap,aE);}if((ak===i.fingers||i.fingers===K)||!P){aC(Q,aq);k=aB(g[0].start,g[0].end);h=av(g[0].start,g[0].end);if(i.swipeStatus||i.pinchStatus){S=al(Q,ao);}if(!i.triggerOnTouchEnd){var R=!b();if(j()===true){ao=J;S=al(Q,ao);}else{if(R){ao=D;al(Q,ao);}}}}else{ao=D;al(Q,ao);}if(S===false){ao=D;al(Q,ao);}}function l(Q){Q=Q.originalEvent;if(Q.touches&&Q.touches.length>0){return true;}Q.preventDefault();n=aD();if(ap!=0){aE=m(g[0].end,g[1].end);f=aF(ap,aE);r=c(g[0].end,g[1].end);}k=aB(g[0].start,g[0].end);aq=a(g[0].start,g[0].end);h=av();if(i.triggerOnTouchEnd||(i.triggerOnTouchEnd===false&&ao===I)){ao=J;var T=au()||!d();var V=((ak===i.fingers||i.fingers===K)||!P);var W=g[0].end.x!==0;var U=(V&&W&&T);if(U){var S=b();var R=j();if((R===true||R===null)&&S){al(Q,ao);}else{if(!S||R===false){ao=D;al(Q,ao);}}}else{ao=D;al(Q,ao);}}else{if(ao===I){ao=D;al(Q,ao);}}az.unbind(q,am,false);az.unbind(aw,l,false);e(false);}function at(){ak=0;n=0;ax=0;ap=0;aE=0;f=1;e(false);}function al(Q,S){var R=undefined;if(i.swipeStatus){R=i.swipeStatus.call(az,Q,S,aq||null,k||0,h||0,ak);}if(i.pinchStatus&&au()){R=i.pinchStatus.call(az,Q,S,r||null,aE||0,h||0,ak,f);}if(S===D){if(i.click&&(ak===1||!P)&&(isNaN(k)||k===0)){R=i.click.call(az,Q,Q.target);}}if(S==J){if(i.swipe){R=i.swipe.call(az,Q,aq,k,h,ak);}switch(aq){case E:if(i.swipeLeft){R=i.swipeLeft.call(az,Q,aq,k,h,ak);}break;case F:if(i.swipeRight){R=i.swipeRight.call(az,Q,aq,k,h,ak);}break;case N:if(i.swipeUp){R=i.swipeUp.call(az,Q,aq,k,h,ak);}break;case y:if(i.swipeDown){R=i.swipeDown.call(az,Q,aq,k,h,ak);}break;}switch(r){case O:if(i.pinchIn){R=i.pinchIn.call(az,Q,r||null,aE||0,h||0,ak,f);}break;case x:if(i.pinchOut){R=i.pinchOut.call(az,Q,r||null,aE||0,h||0,ak,f);}break;}}if(S===D||S===J){at(Q);}return R;}function j(){if(i.threshold!==null){return k>=i.threshold;}return null;}function b(){var Q;if(i.maxTimeThreshold){if(h>=i.maxTimeThreshold){Q=false;}else{Q=true;}}else{Q=true;}return Q;}function aC(S,R){if(i.allowPageScroll===H||d()){S.preventDefault();}else{var Q=i.allowPageScroll===B;switch(R){case E:if((i.swipeLeft&&Q)||(!Q&&i.allowPageScroll!=v)){S.preventDefault();}break;case F:if((i.swipeRight&&Q)||(!Q&&i.allowPageScroll!=v)){S.preventDefault();}break;case N:if((i.swipeUp&&Q)||(!Q&&i.allowPageScroll!=A)){S.preventDefault();}break;case y:if((i.swipeDown&&Q)||(!Q&&i.allowPageScroll!=A)){S.preventDefault();}break;}}}function av(){return n-ax;}function m(Q,R){var S=Math.abs(Q.x-R.x);var T=Math.abs(Q.y-R.y);return Math.round(Math.sqrt(S*S+T*T));}function aF(S,R){var Q=(R/S)*1;return Q.toFixed(2);}function c(){if(f<1){return x;}else{return O;}}function aB(Q,R){return Math.round(Math.sqrt(Math.pow(R.x-Q.x,2)+Math.pow(R.y-Q.y,2)));}function ay(S,U){var V=S.x-U.x;var Q=U.y-S.y;var T=Math.atan2(Q,V);var R=Math.round(T*180/Math.PI);if(R<0){R=360-Math.abs(R);}return R;}function a(R,S){var Q=ay(R,S);if((Q<=45)&&(Q>=0)){return E;}else{if((Q<=360)&&(Q>=315)){return E;}else{if((Q>=135)&&(Q<=225)){return F;}else{if((Q>45)&&(Q<135)){return y;}else{return N;}}}}}function aD(){var Q=new Date();return Q.getTime();}function aj(){az.unbind(ar,aA);az.unbind(u,at);az.unbind(q,am);az.unbind(aw,l);e(false);}function d(){return i.pinchStatus||i.pinchIn||i.pinchOut;}function au(){return r&&d();}function o(){return az.data(w+"_intouch")===true?true:false;}function e(Q){Q=Q===true?true:false;az.data(w+"_intouch",Q);}function p(){var R=[];for(var Q=0;Q<=5;Q++){R.push({start:{x:0,y:0},end:{x:0,y:0},delta:{x:0,y:0}});}return R;}}})(jQuery);window.Modernizr=function(ab,aa,Z){function B(f,e){var h=f.charAt(0).toUpperCase()+f.substr(1),g=(f+" "+P.join(h+" ")+h).split(" ");return C(g,e);}function C(e,c){for(var f in e){if(S[e[f]]!==Z){return c=="pfx"?e[f]:!0;}}return !1;}function D(d,c){return !!~(""+d).indexOf(c);}function E(d,c){return typeof d===c;}function F(d,c){return G(prefixes.join(d+";")+(c||""));}function G(b){S.cssText=b;}var Y="2.0.6",X={},W=aa.documentElement,V=aa.head||aa.getElementsByTagName("head")[0],U="modernizr",T=aa.createElement(U),S=T.style,R,Q=Object.prototype.toString,P="Webkit Moz O ms Khtml".split(" "),O={},N={},M={},K=[],J,I={}.hasOwnProperty,H;!E(I,Z)&&!E(I.call,Z)?H=function(d,c){return I.call(d,c);}:H=function(d,c){return c in d&&E(d.constructor.prototype[c],Z);},O.csstransitions=function(){return B("transitionProperty");};for(var L in O){H(O,L)&&(J=L.toLowerCase(),X[J]=O[L](),K.push((X[J]?"":"no-")+J));}G(""),T=R=null,X._version=Y,X._domPrefixes=P,X.testProp=function(b){return C([b]);},X.testAllProps=B;return X;}(this,this.document);